-- CRIA O BANCO DE DADOS
CREATE DATABASE EXLIBRIS;

-- UTILIZA O BD
USE EXLIBRIS;


-- TP PESSOA
CREATE TABLE EXLIBRIS.PESSOA(
  PESSOA_COD INT NOT NULL AUTO_INCREMENT,
  NOME CHAR(60) NOT NULL,
  SOBRENOME CHAR(60) NULL,
  ANO_NASC CHAR(4) NULL,
  BIO VARCHAR(2048) NULL,
  PRIMARY KEY(PESSOA_COD)
);

-- TT FORMATO
CREATE TABLE EXLIBRIS.FORMATO(
  FORMATO_COD INT NOT NULL AUTO_INCREMENT,
  FORMATO CHAR(25) NOT NULL,
  PRIMARY KEY(FORMATO_COD)
);

-- TT PAPEL
CREATE TABLE EXLIBRIS.PAPEL(
  PAPEL_COD INT NOT NULL AUTO_INCREMENT,
  PAPEL CHAR(30) NULL,
  PRIMARY KEY(PAPEL_COD)
);

-- TT PAIS
CREATE TABLE EXLIBRIS.PAIS(
  PAIS_COD INT NOT NULL AUTO_INCREMENT,
  PAIS_SG CHAR(3) NOT NULL,
  PAIS CHAR(30) NOT NULL,
  PRIMARY KEY(PAIS_COD)
);

-- TT IDIOMA
CREATE TABLE EXLIBRIS.IDIOMA(
  IDIOMA_COD INT NOT NULL AUTO_INCREMENT,
  IDIOMA CHAR(25) NOT NULL,
  ISO339 CHAR(5) NOT NULL,
  PRIMARY KEY(IDIOMA_COD)
);

-- TT GENERO
CREATE TABLE EXLIBRIS.GENERO(
  GENERO_COD INT NOT NULL AUTO_INCREMENT,
  GENERO CHAR(30),
  PRIMARY KEY(GENERO_COD)
);

-- TT UF
CREATE TABLE EXLIBRIS.UF(
  UF_COD INT NOT NULL AUTO_INCREMENT,
  UF_SIGLA CHAR(2) NOT NULL,
  UF_NOME CHAR(30) NOT NULL,
  PRIMARY KEY(UF_COD)
);

-- TT TIPO_ENDERECO
CREATE TABLE EXLIBRIS.TIPO_ENDERECO(
  TIPO_ENDERECO_COD INT NOT NULL AUTO_INCREMENT,
  TIPO_ENDERECO_SG CHAR(3) NOT NULL,
  TIPO_ENDERECO CHAR(30) NOT NULL,
  PRIMARY KEY(TIPO_ENDERECO_COD)
);

-- TT TIPO_TELEFONE
CREATE TABLE EXLIBRIS.TIPO_TELEFONE(
  TIPO_TELEFONE_COD INT NOT NULL AUTO_INCREMENT,
  TIPO_TELEFONE CHAR(30),
  PRIMARY KEY(TIPO_TELEFONE_COD)
);

CREATE TABLE EXLIBRIS.TELEFONE(
  TELEFONE_COD INT NOT NULL AUTO_INCREMENT,
  PESSOA_COD INT NOT NULL,
  CODIGO_AREA CHAR(4) NOT NULL,
  TELEFONE_NUMERO CHAR(12) NOT NULL,
  TIPO_TELEFONE_COD INT NOT NULL,
  PRIMARY KEY(TELEFONE_COD),
  CONSTRAINT FK_PESSOA
    FOREIGN KEY(PESSOA_COD)
    REFERENCES EXLIBRIS.PESSOA(PESSOA_COD)
    ON DELETE CASCADE
    ON UPDATE NO ACTION,
  CONSTRAINT FK_TIPO_TELEFONE
    FOREIGN KEY(TIPO_TELEFONE_COD)
    REFERENCES EXLIBRIS.TIPO_TELEFONE(TIPO_TELEFONE_COD)
    ON DELETE CASCADE
    ON UPDATE NO ACTION
);

CREATE TABLE EXLIBRIS.ENDERECO(
  ENDERECO_COD INT NOT NULL AUTO_INCREMENT,
  ENDERECO CHAR(200) NOT NULL,
  CIDADE CHAR(30) NOT NULL,
  CODIGO_POSTAL CHAR(10) NULL,
  UF_COD INT NOT NULL,
  PAIS_COD INT NOT NULL,
  TIPO_ENDERECO_COD INT NOT NULL,
  PRIMARY KEY(ENDERECO_COD),
  CONSTRAINT FK_UF
    FOREIGN KEY(UF_COD)
    REFERENCES EXLIBRIS.UF(UF_COD)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT FK_PAIS
    FOREIGN KEY(PAIS_COD)
    REFERENCES EXLIBRIS.PAIS(PAIS_COD)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT FK_TIPO_ENDERECO
    FOREIGN KEY(TIPO_ENDERECO_COD)
    REFERENCES EXLIBRIS.TIPO_ENDERECO(TIPO_ENDERECO_COD)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
);

CREATE TABLE EXLIBRIS.EDITORA(
  EDITORA_COD INT NOT NULL AUTO_INCREMENT,
  NOME CHAR(60) NOT NULL,
  ENDERECO_COD INT NOT NULL,
  SITE CHAR(60) NULL,
  EMAIL CHAR(60) NULL,
  PRIMARY KEY(EDITORA_COD),
  CONSTRAINT FK_ENDERECO
    FOREIGN KEY(ENDERECO_COD)
    REFERENCES EXLIBRIS.ENDERECO(ENDERECO_COD)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
);

CREATE TABLE EXLIBRIS.OBRA(
  OBRA_COD INT NOT NULL AUTO_INCREMENT,
  TITULO CHAR(60) NOT NULL,
  SUBTITULO CHAR(60) NULL,
  TITULO_ORIGINAL CHAR(60) NULL,
  IDIOMA_ORIGINAL_COD INT NULL,
  GENERO_COD INT NULL,
  SUMARIO VARCHAR(2048),
  PRIMARY KEY(OBRA_COD),
  CONSTRAINT FK_IDIOMA_ORIGINAL
    FOREIGN KEY (IDIOMA_ORIGINAL_COD)
    REFERENCES EXLIBRIS.IDIOMA(IDIOMA_COD)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT GENERO
    FOREIGN KEY (GENERO_COD)
    REFERENCES EXLIBRIS.GENERO(GENERO_COD)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
);
